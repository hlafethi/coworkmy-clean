import{r as d,g as x,k as b,j as e,C as m,a as h,b as p,d as g,B as u,e as f,f as N}from"./index-Cce3lADS.js";import{N as _,F as v}from"./Footer-DmynJHoT.js";import{A as P}from"./aspect-ratio-Dq-tlfpa.js";import"./settings-3aIIbpxO.js";import"./client-BAyFyFAZ.js";import"./useHomepageSettings-CJ86T6QY.js";import"./user-CuhW9aOA.js";import"./log-out-DywJhjMF.js";import"./useLegalPages-Cgu1k7ZV.js";const w=()=>{const[r,s]=d.useState([]),[l,c]=d.useState(!0),[n,a]=d.useState(null),t=async()=>{try{c(!0),a(null);const i=await x.getSpaces();i.data?(s(i.data),console.log("✅ Espaces chargés:",i.data.length)):(a(i.error||"Erreur lors du chargement des espaces"),console.error("❌ Erreur chargement espaces:",i.error))}catch(i){a("Erreur de connexion"),console.error("❌ Erreur chargement espaces:",i)}finally{c(!1)}},y=async i=>{try{const o=await x.createSpace(i);return o.data?(s(j=>[o.data,...j]),console.log("✅ Espace créé:",o.data.id),{success:!0,data:o.data}):(console.error("❌ Erreur création espace:",o.error),{success:!1,error:o.error})}catch(o){return console.error("❌ Erreur création espace:",o),{success:!1,error:"Erreur de connexion"}}};return d.useEffect(()=>{t()},[]),{spaces:r,loading:l,error:n,refetch:t,createSpace:y}},F=r=>{let s=0,l="Prix",c="€ TTC";if(r.pricing_type)switch(r.pricing_type){case"hourly":s=parseFloat(r.hourly_price)||0,l="Prix horaire";break;case"daily":s=parseFloat(r.daily_price)||0,l="Prix journalier";break;case"monthly":s=parseFloat(r.monthly_price)||0,l="Prix mensuel";break;case"yearly":s=parseFloat(r.yearly_price)||0,l="Prix annuel";break;case"half_day":s=parseFloat(r.half_day_price)||0,l="Prix demi-journée";break;case"quarter":s=parseFloat(r.quarter_price)||0,l="Prix quart de journée";break;case"custom":s=parseFloat(r.custom_price)||0,l=r.custom_label||"Prix personnalisé";break;default:s=parseFloat(r.monthly_price)||parseFloat(r.daily_price)||parseFloat(r.hourly_price)||0,l=r.monthly_price?"Prix mensuel":r.daily_price?"Prix journalier":r.hourly_price?"Prix horaire":"Prix"}else s=parseFloat(r.monthly_price)||parseFloat(r.daily_price)||parseFloat(r.hourly_price)||0,l=r.monthly_price?"Prix mensuel":r.daily_price?"Prix journalier":r.hourly_price?"Prix horaire":"Prix";const n=typeof s=="number"?s*1.2:0;return{label:l,price:n.toFixed(2),unit:c}},D=()=>{const{spaces:r,loading:s,error:l}=w(),c=b(),n=a=>{c(`/booking/${a}`)};return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(_,{}),e.jsxs("main",{className:"flex-grow container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Nos espaces"}),e.jsx("p",{className:"text-gray-600",children:"Découvrez tous nos espaces disponibles à la réservation"})]}),s?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[...Array(6)].map((a,t)=>e.jsxs(m,{className:"animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-200"}),e.jsxs(h,{children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),e.jsxs(p,{children:[e.jsx("div",{className:"h-20 bg-gray-200 rounded mb-4"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4"})]})]}),e.jsx(g,{children:e.jsx("div",{className:"h-10 bg-gray-200 rounded w-full"})})]},t))}):l?e.jsxs("div",{className:"bg-red-50 p-8 rounded-lg text-center",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Erreur lors du chargement des espaces: ",l]}),e.jsx(u,{onClick:()=>window.location.reload(),children:"Réessayer"})]}):r.length===0?e.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Aucun espace disponible pour le moment."}),e.jsx(u,{onClick:()=>c("/dashboard"),children:"Retour au tableau de bord"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(a=>e.jsxs(m,{className:"overflow-hidden flex flex-col h-full",children:[e.jsx(P,{ratio:16/9,className:"bg-gray-100",children:a.image_url?e.jsx("img",{src:a.image_url,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400",children:"Image non disponible"})})}),e.jsxs(h,{children:[e.jsx(f,{children:a.name}),e.jsxs(N,{children:["Capacité: ",a.capacity," personnes"]})]}),e.jsxs(p,{className:"flex-grow",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:a.description||"Aucune description disponible"}),e.jsx("div",{className:"flex flex-col items-center",children:(()=>{const t=F(a);return e.jsxs("div",{className:"text-center bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 mb-2",children:t.label}),e.jsxs("p",{className:"text-xl font-semibold text-gray-900",children:[t.price," ",t.unit]})]})})()})]}),e.jsx(g,{children:e.jsx(u,{className:"w-full",onClick:()=>n(a.id),children:"Réserver"})})]},a.id))})]}),e.jsx(v,{})]})};export{D as default};
