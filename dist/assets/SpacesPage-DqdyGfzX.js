import{r as u,g as m,l as n,k as f,j as e,C as h,a as p,b as g,d as y,B as x,e as N,f as _}from"./index-DjQDvwSR.js";import{N as v,F as P}from"./Footer-DhJcKUQp.js";import{A as w}from"./aspect-ratio-s_mngsox.js";import"./settings-CoYPsFXm.js";import"./client-DHZYSnFT.js";import"./useHomepageSettings-7-WKAsEm.js";import"./user-Drh04oF-.js";import"./log-out-C0lE14kR.js";import"./useLegalPages-48VAoON1.js";const F=()=>{const[r,a]=u.useState([]),[l,o]=u.useState(!0),[d,s]=u.useState(null),t=async()=>{try{o(!0),s(null);const i=await m.getSpaces();i.data?(a(i.data),n.log("✅ Espaces chargés:",i.data.length)):(s(i.error||"Erreur lors du chargement des espaces"),n.error("❌ Erreur chargement espaces:",i.error))}catch(i){s("Erreur de connexion"),n.error("❌ Erreur chargement espaces:",i)}finally{o(!1)}},j=async i=>{try{const c=await m.createSpace(i);return c.data?(a(b=>[c.data,...b]),n.log("✅ Espace créé:",c.data.id),{success:!0,data:c.data}):(n.error("❌ Erreur création espace:",c.error),{success:!1,error:c.error})}catch(c){return n.error("❌ Erreur création espace:",c),{success:!1,error:"Erreur de connexion"}}};return u.useEffect(()=>{t()},[]),{spaces:r,loading:l,error:d,refetch:t,createSpace:j}},C=r=>{let a=0,l="Prix",o="€ TTC";if(r.pricing_type)switch(r.pricing_type){case"hourly":a=parseFloat(r.hourly_price)||0,l="Prix horaire";break;case"daily":a=parseFloat(r.daily_price)||0,l="Prix journalier";break;case"monthly":a=parseFloat(r.monthly_price)||0,l="Prix mensuel";break;case"yearly":a=parseFloat(r.yearly_price)||0,l="Prix annuel";break;case"half_day":a=parseFloat(r.half_day_price)||0,l="Prix demi-journée";break;case"quarter":a=parseFloat(r.quarter_price)||0,l="Prix quart de journée";break;case"custom":a=parseFloat(r.custom_price)||0,l=r.custom_label||"Prix personnalisé";break;default:a=parseFloat(r.monthly_price)||parseFloat(r.daily_price)||parseFloat(r.hourly_price)||0,l=r.monthly_price?"Prix mensuel":r.daily_price?"Prix journalier":r.hourly_price?"Prix horaire":"Prix"}else a=parseFloat(r.monthly_price)||parseFloat(r.daily_price)||parseFloat(r.hourly_price)||0,l=r.monthly_price?"Prix mensuel":r.daily_price?"Prix journalier":r.hourly_price?"Prix horaire":"Prix";const d=typeof a=="number"?a*1.2:0;return{label:l,price:d.toFixed(2),unit:o}},I=()=>{const{spaces:r,loading:a,error:l}=F(),o=f(),d=s=>{o(`/booking/${s}`)};return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(v,{}),e.jsxs("main",{className:"flex-grow container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Nos espaces"}),e.jsx("p",{className:"text-gray-600",children:"Découvrez tous nos espaces disponibles à la réservation"})]}),a?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[...Array(6)].map((s,t)=>e.jsxs(h,{className:"animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-200"}),e.jsxs(p,{children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),e.jsxs(g,{children:[e.jsx("div",{className:"h-20 bg-gray-200 rounded mb-4"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4"})]})]}),e.jsx(y,{children:e.jsx("div",{className:"h-10 bg-gray-200 rounded w-full"})})]},t))}):l?e.jsxs("div",{className:"bg-red-50 p-8 rounded-lg text-center",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Erreur lors du chargement des espaces: ",l]}),e.jsx(x,{onClick:()=>window.location.reload(),children:"Réessayer"})]}):r.length===0?e.jsxs("div",{className:"bg-gray-50 p-8 rounded-lg text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Aucun espace disponible pour le moment."}),e.jsx(x,{onClick:()=>o("/dashboard"),children:"Retour au tableau de bord"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(s=>e.jsxs(h,{className:"overflow-hidden flex flex-col h-full",children:[e.jsx(w,{ratio:16/9,className:"bg-gray-100",children:s.image_url?e.jsx("img",{src:s.image_url,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400",children:"Image non disponible"})})}),e.jsxs(p,{children:[e.jsx(N,{children:s.name}),e.jsxs(_,{children:["Capacité: ",s.capacity," personnes"]})]}),e.jsxs(g,{className:"flex-grow",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:s.description||"Aucune description disponible"}),e.jsx("div",{className:"flex flex-col items-center",children:(()=>{const t=C(s);return e.jsxs("div",{className:"text-center bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 mb-2",children:t.label}),e.jsxs("p",{className:"text-xl font-semibold text-gray-900",children:[t.price," ",t.unit]})]})})()})]}),e.jsx(y,{children:e.jsx(x,{className:"w-full",onClick:()=>d(s.id),children:"Réserver"})})]},s.id))})]}),e.jsx(P,{})]})};export{I as default};
