import{r as l,k as y,i as E,m as b,j as r,n as p,I as g,B as F,l as o,u as x}from"./index-DjQDvwSR.js";import{A as C}from"./AuthLayout-BCqaa9Ts.js";import"./Footer-DhJcKUQp.js";import"./settings-CoYPsFXm.js";import"./client-DHZYSnFT.js";import"./useHomepageSettings-7-WKAsEm.js";import"./user-Drh04oF-.js";import"./log-out-C0lE14kR.js";import"./useLegalPages-48VAoON1.js";const I=()=>{var c;const[i,h]=l.useState(""),[n,f]=l.useState(""),[t,u]=l.useState(!1),v=y(),j=((c=E().state)==null?void 0:c.from)||"/dashboard",{signIn:L}=b(),w=async s=>{var m,d;s.preventDefault(),u(!0);try{if(!i.trim()||!n)throw new Error("Veuillez remplir tous les champs");o.log("[LoginForm] Tentative de connexion...");const e=await L(i.trim(),n.trim());if(e.user&&!e.error)o.log("[LoginForm] Connexion réussie"),o.log("[LoginForm] User ID:",(m=e.user)==null?void 0:m.id),o.log("[LoginForm] User email:",(d=e.user)==null?void 0:d.email),x.success("Connexion réussie"),v(j,{replace:!0});else throw new Error(e.error||"Erreur de connexion")}catch(e){o.error("[LoginForm] Erreur de connexion:",e);let a="Erreur de connexion";e instanceof Error&&(e.message.includes("Invalid login credentials")?a="Email ou mot de passe incorrect":e.message.includes("rate limit")?a="Trop de tentatives. Veuillez réessayer plus tard":a=e.message),x.error(a)}finally{u(!1)}};return r.jsxs("form",{onSubmit:w,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(p,{htmlFor:"email",children:"Email"}),r.jsx(g,{id:"email",type:"email",value:i,onChange:s=>h(s.target.value),placeholder:"votre@email.com",required:!0,disabled:t})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(p,{htmlFor:"password",children:"Mot de passe"}),r.jsx(g,{id:"password",type:"password",value:n,onChange:s=>f(s.target.value),placeholder:"••••••••",required:!0,disabled:t})]}),r.jsx(F,{type:"submit",className:"w-full",disabled:t,children:t?"Connexion...":"Se connecter"})]})},V=()=>r.jsx(C,{title:"Connexion",subtitle:"Bienvenue à nouveau ! Connectez-vous à votre compte.",children:r.jsx(I,{})});export{V as default};
