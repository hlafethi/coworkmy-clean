import{r as a,a as b,j as e,C as x,b as p,f,g as h,d as v,B as j,I as C,n as E,h as S,k as A}from"./index-DCtXYFOS.js";import{A as F,a as q}from"./alert-Bwrbd4NU.js";import{N as z,F as D}from"./Footer-BK_ExZpM.js";import"./settings-DQgqer8k.js";import"./client-7MFx3KKO.js";import"./useHomepageSettings-CAf6JXxW.js";import"./user-R1N3rPDu.js";import"./log-out-CfISkMyv.js";import"./useLegalPages-Cy8p2TlH.js";const H=()=>{const[l,g]=a.useState(""),[n,o]=a.useState(!1),[c,s]=a.useState(""),[y,d]=a.useState(!1),N=b(),w=async i=>{var m,u;i.preventDefault(),o(!0),s(""),d(!1);try{const t=`${window.location.origin}/auth/reset-password`,r=await S.post("/auth/forgot-password",{email:l,redirectUrl:t});if(!r.success){console.error("❌ Erreur:",r.error),(m=r.error)!=null&&m.includes("rate limit")?s("Trop de tentatives. Veuillez attendre quelques minutes avant de réessayer."):(u=r.error)!=null&&u.includes("invalid email")?s("Adresse email invalide."):s(r.error||"Erreur lors de l'envoi de l'email");return}A.success("Un email de réinitialisation a été envoyé à votre adresse email."),d(!0)}catch(t){s(`Erreur: ${t.message||"Impossible d'envoyer l'email de réinitialisation"}`)}finally{o(!1)}};return y?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs(x,{className:"w-full max-w-md",children:[e.jsxs(p,{children:[e.jsx(f,{className:"text-2xl font-bold text-green-600",children:"Email envoyé !"}),e.jsx(h,{children:"Un email de réinitialisation a été envoyé à votre adresse email. Vérifiez votre boîte de réception pour réinitialiser votre mot de passe."})]}),e.jsx(v,{children:e.jsx(j,{onClick:()=>N("/auth/login"),className:"w-full",children:"Retour à la connexion"})})]})}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(z,{}),e.jsx("main",{className:"flex-grow flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs(x,{className:"w-full max-w-md",children:[e.jsxs(p,{children:[e.jsx(f,{className:"text-2xl font-bold text-gray-800",children:"Réinitialiser votre mot de passe"}),e.jsx(h,{children:"Entrez votre adresse email pour recevoir un lien de réinitialisation"})]}),e.jsx(v,{children:e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Adresse email"}),e.jsx(C,{type:"email",value:l,onChange:i=>g(i.target.value),required:!0,placeholder:"votre@email.com",autoComplete:"email"})]}),c&&e.jsx(F,{variant:"destructive",children:e.jsx(q,{children:c})}),e.jsx(j,{type:"submit",disabled:n,className:"w-full",children:n?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi..."]}):"Envoyer le lien de réinitialisation"})]})})]})}),e.jsx(D,{})]})};export{H as default};
