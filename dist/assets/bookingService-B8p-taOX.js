import{c as i,g as o,u as a}from"./index-DjQDvwSR.js";const d=i("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function c(r){if(!r)throw new Error("Invalid date");const e=r instanceof Date?r:new Date(r);if(isNaN(e.getTime()))throw new Error("Invalid date format");const s=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],t=["janvier","f√©vrier","mars","avril","mai","juin","juillet","ao√ªt","septembre","octobre","novembre","d√©cembre"];return`${s[e.getDay()]} ${e.getDate()} ${t[e.getMonth()]} ${e.getFullYear()}`}function u(r){if(!r)throw new Error("Invalid date");const e=r instanceof Date?r:new Date(r);if(isNaN(e.getTime()))throw new Error("Invalid date format");return e.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}function p(r){if(!r)return"Date non disponible";const e=r instanceof Date?r:new Date(r);return isNaN(e.getTime())?"Date invalide":`${c(e)} √† ${u(e)}`}async function m(){try{console.log("üîç D√©but de la r√©cup√©ration des r√©servations admin...");const r=await o.get("/admin/bookings");if(!r.success)throw console.error("‚ùå Erreur lors de la r√©cup√©ration des r√©servations:",r.error),new Error(r.error||"Erreur lors de la r√©cup√©ration des r√©servations");const e=r.data||[];if(console.log(`üìä R√©servations r√©cup√©r√©es depuis l'API admin: ${e.length}`),!Array.isArray(e))return console.log("‚ö†Ô∏è bookingsData n'est pas un tableau, utilisation d'un tableau vide"),[];const s=e.map(t=>{var n;return{id:t.id,user_id:t.user_id,space_id:t.space_id,start_time:t.start_time||t.start_date,end_time:t.end_time||t.end_date,total_price_ht:t.total_price_ht||Number(t.total_price||0)/1.2,total_price_ttc:t.total_price_ttc||Number(t.total_price||0),status:t.status,created_at:t.created_at,updated_at:t.updated_at,user_name:t.user_name||t.display_name||t.user_email||`Utilisateur #${((n=t.user_id)==null?void 0:n.slice(0,8))||"Unknown"}`,space_name:t.space_name||"Espace inconnu",space_pricing_type:t.space_pricing_type||"hourly"}});return console.log(`‚úÖ R√©cup√©ration termin√©e: ${s.length} r√©servations format√©es`),s}catch(r){return console.error("‚ùå Erreur lors de la r√©cup√©ration des r√©servations:",r),a.error("Impossible de r√©cup√©rer les r√©servations"),[]}}async function _(r,e){try{console.log(`üîÑ Mise √† jour du statut de la r√©servation ${r} vers ${e}`);const s=await o.put(`/admin/bookings/${r}/status`,{status:e});if(!s.success)throw console.error("‚ùå Erreur lors de la mise √† jour:",s.error),new Error(s.error||"Erreur lors de la mise √† jour");return console.log(`‚úÖ Statut mis √† jour avec succ√®s pour la r√©servation ${r}`),!0}catch(s){return console.error("‚ùå Erreur lors de la mise √† jour du statut:",s),a.error("Impossible de mettre √† jour la r√©servation"),!1}}async function f(r){try{console.log(`üóëÔ∏è Suppression de la r√©servation ${r}`);const e=await o.delete(`/bookings/${r}`);if(!e.success)throw console.error("‚ùå Erreur lors de la suppression:",e.error),new Error(e.error||"Erreur lors de la suppression");return console.log(`‚úÖ R√©servation ${r} supprim√©e avec succ√®s`),a.success("R√©servation supprim√©e avec succ√®s"),!0}catch(e){return console.error("‚ùå Erreur lors de la suppression de la r√©servation:",e),a.error("Impossible de supprimer la r√©servation"),!1}}export{d as C,m as a,f as d,p as f,_ as u};
