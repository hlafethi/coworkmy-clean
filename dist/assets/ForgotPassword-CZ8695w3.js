import{r as i,k as E,j as e,C as x,a as p,e as h,f as v,b as f,B as j,I as b,o as C,s as S,u as A}from"./index-DjQDvwSR.js";import{A as F,a as R}from"./alert-DPW0vZ1w.js";import{N as U,F as q}from"./Footer-DhJcKUQp.js";import"./client-DHZYSnFT.js";import"./settings-CoYPsFXm.js";import"./useHomepageSettings-7-WKAsEm.js";import"./user-Drh04oF-.js";import"./log-out-C0lE14kR.js";import"./useLegalPages-48VAoON1.js";const $=()=>{const[t,g]=i.useState(""),[o,n]=i.useState(!1),[c,a]=i.useState(""),[y,d]=i.useState(!1),N=E(),w=async l=>{var m,u;l.preventDefault(),n(!0),a(""),d(!1);try{console.log("üîÑ Envoi de l'email de r√©initialisation..."),console.log("üìß Email:",t);const s=`${window.location.origin}/auth/reset-password`;console.log("üîó URL de redirection:",s);const{error:r}=await S.auth.resetPasswordForEmail(t,{redirectTo:s});if(r){if(console.error("‚ùå Erreur:",r),(m=r.message)!=null&&m.includes("rate limit"))a("Trop de tentatives. Veuillez attendre quelques minutes avant de r√©essayer.");else if((u=r.message)!=null&&u.includes("invalid email"))a("Adresse email invalide.");else throw r;return}console.log("‚úÖ Email envoy√© avec succ√®s"),A.success("Un email de r√©initialisation a √©t√© envoy√© √† votre adresse email."),d(!0)}catch(s){console.error("‚ùå Erreur compl√®te:",s),a(`Erreur: ${s.message||"Impossible d'envoyer l'email de r√©initialisation"}`)}finally{n(!1)}};return y?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs(x,{className:"w-full max-w-md",children:[e.jsxs(p,{children:[e.jsx(h,{className:"text-2xl font-bold text-green-600",children:"Email envoy√© !"}),e.jsx(v,{children:"Un email de r√©initialisation a √©t√© envoy√© √† votre adresse email. V√©rifiez votre bo√Æte de r√©ception pour r√©initialiser votre mot de passe."})]}),e.jsx(f,{children:e.jsx(j,{onClick:()=>N("/auth/login"),className:"w-full",children:"Retour √† la connexion"})})]})}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(U,{}),e.jsx("main",{className:"flex-grow flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs(x,{className:"w-full max-w-md",children:[e.jsxs(p,{children:[e.jsx(h,{className:"text-2xl font-bold text-gray-800",children:"R√©initialiser votre mot de passe"}),e.jsx(v,{children:"Entrez votre adresse email pour recevoir un lien de r√©initialisation"})]}),e.jsx(f,{children:e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Adresse email"}),e.jsx(b,{type:"email",value:t,onChange:l=>g(l.target.value),required:!0,placeholder:"votre@email.com",autoComplete:"email"})]}),c&&e.jsx(F,{variant:"destructive",children:e.jsx(R,{children:c})}),e.jsx(j,{type:"submit",disabled:o,className:"w-full",children:o?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi..."]}):"Envoyer le lien de r√©initialisation"})]})})]})}),e.jsx(q,{})]})};export{$ as default};
