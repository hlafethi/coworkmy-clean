import{r as s,g as d,m as _}from"./index-DjQDvwSR.js";function f(r){const[u,i]=s.useState(null),[l,n]=s.useState(!0),[e,o]=s.useState(null);return s.useEffect(()=>{if(!r){n(!1);return}(async()=>{try{n(!0),o(null),console.log("👤 Récupération du profil utilisateur:",r);const a=await d.get(`/users/${r}`);a.success&&a.data?(console.log("✅ Profil utilisateur récupéré:",a.data),i(a.data)):(console.warn("⚠️ Aucun profil utilisateur trouvé"),i(null))}catch(a){console.error("❌ Erreur lors du chargement du profil utilisateur:",a),o("Erreur lors du chargement du profil"),i(null)}finally{n(!1)}})()},[r]),{profile:u,loading:l,error:e,updateProfile:async c=>{if(!r)return!1;try{console.log("👤 Mise à jour du profil utilisateur:",r,c);const a=await d.put(`/users/${r}`,c);return a.success&&a.data?(console.log("✅ Profil utilisateur mis à jour:",a.data),i(a.data),!0):(console.error("❌ Erreur lors de la mise à jour du profil:",a.error),o(a.error||"Erreur lors de la mise à jour"),!1)}catch(a){return console.error("❌ Erreur lors de la mise à jour du profil utilisateur:",a),o("Erreur lors de la mise à jour du profil"),!1}}}}function h(){const[r,u]=s.useState(null),[i,l]=s.useState(!0),{user:n}=_(),{profile:e}=f(n==null?void 0:n.id),o=s.useCallback(async()=>{l(!0);try{console.log("🖼️ Chargement des paramètres homepage depuis l'API...");const a=await(await fetch("http://localhost:5000/api/homepage-settings")).json(),t=await(await fetch("http://localhost:5000/api/company-settings")).json();if(a.success&&a.data){console.log("✅ Paramètres homepage chargés depuis l'API:",a.data),console.log("✅ Paramètres entreprise chargés depuis l'API:",t.data);const p={...a.data,...t.success&&t.data&&{company_name:t.data.name||"",company_email:t.data.email||"",company_phone:t.data.phone||"",company_address:t.data.address||"",company_website:t.data.website||"",company_description:t.data.description||"",company_logo_url:t.data.logo_url||"",company_siret:t.data.siret||"",company_vat_number:t.data.vat_number||""},...e&&{user_name:e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:e.first_name||"Utilisateur",user_company:e.company||"",user_city:e.city||"",user_avatar:e.avatar_url||"",user_presentation:e.presentation||""}};u(p)}else{console.warn("⚠️ Aucun paramètre homepage trouvé, utilisation des paramètres par défaut");const p={title:"CoworkMy",description:"Plateforme de coworking moderne",hero_title:"Bienvenue sur CoworkMy",hero_subtitle:"Découvrez nos espaces de coworking",hero_background_image:"https://images.unsplash.com/photo-1600508774636-7b9d1a4db91f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80",cta_text:"Commencer",features_title:"Fonctionnalités",features_subtitle:"Découvrez nos services",cta_section_title:"Prêt à commencer ?",cta_section_subtitle:"Rejoignez-nous dès aujourd'hui",cta_secondary_button_text:"En savoir plus",is_published:!0,...t.success&&t.data&&{company_name:t.data.name||"Votre Entreprise",company_email:t.data.email||"contact@votre-entreprise.com",company_phone:t.data.phone||"+33 1 23 45 67 89",company_address:t.data.address||`123 Rue de la Paix
75001 Paris, France`,company_website:t.data.website||"https://www.votre-entreprise.com",company_description:t.data.description||"Une entreprise innovante",company_logo_url:t.data.logo_url||"",company_siret:t.data.siret||"",company_vat_number:t.data.vat_number||""},...e&&{user_name:e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:e.first_name||"Utilisateur",user_company:e.company||"",user_city:e.city||"",user_avatar:e.avatar_url||"",user_presentation:e.presentation||""}};u(p)}}catch(c){console.error("❌ Erreur lors du chargement des paramètres homepage:",c),u({title:"CoworkMy",description:"Plateforme de coworking moderne",hero_title:"Bienvenue sur CoworkMy",hero_subtitle:"Découvrez nos espaces de coworking",hero_background_image:"https://images.unsplash.com/photo-1600508774636-7b9d1a4db91f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80",cta_text:"Commencer",features_title:"Fonctionnalités",features_subtitle:"Découvrez nos services",cta_section_title:"Prêt à commencer ?",cta_section_subtitle:"Rejoignez-nous dès aujourd'hui",cta_secondary_button_text:"En savoir plus",is_published:!0,company_name:"Votre Entreprise",company_email:"contact@votre-entreprise.com",company_phone:"+33 1 23 45 67 89",company_address:`123 Rue de la Paix
75001 Paris, France`,company_website:"https://www.votre-entreprise.com",company_description:"Une entreprise innovante",company_logo_url:"",company_siret:"",company_vat_number:""})}finally{l(!1)}},[e]);s.useEffect(()=>{o()},[o]);const m=s.useCallback(()=>{o()},[o]);return{settings:r,loading:i,refetch:m}}export{h as u};
