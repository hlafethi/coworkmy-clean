import{r as n,a as j,l as w,u as b,j as e,m as c,I as m,B as y,k as d}from"./index-DCtXYFOS.js";import{A as E}from"./AuthLayout-BSdg6ozl.js";import"./Footer-BK_ExZpM.js";import"./settings-DQgqer8k.js";import"./client-7MFx3KKO.js";import"./useHomepageSettings-CAf6JXxW.js";import"./user-R1N3rPDu.js";import"./log-out-CfISkMyv.js";import"./useLegalPages-Cy8p2TlH.js";const C=()=>{var u;const[a,p]=n.useState(""),[i,h]=n.useState(""),[t,l]=n.useState(!1),x=j(),f=((u=w().state)==null?void 0:u.from)||"/dashboard",{signIn:g}=b(),v=async r=>{r.preventDefault(),l(!0);try{if(!a.trim()||!i)throw new Error("Veuillez remplir tous les champs");const s=await g(a.trim(),i.trim());if(s.user&&!s.error)d.success("Connexion réussie"),x(f,{replace:!0});else throw new Error(s.error||"Erreur de connexion")}catch(s){console.error("[LoginForm] Erreur de connexion:",s);let o="Erreur de connexion";s instanceof Error&&(s.message.includes("Invalid login credentials")?o="Email ou mot de passe incorrect":s.message.includes("rate limit")?o="Trop de tentatives. Veuillez réessayer plus tard":o=s.message),d.error(o)}finally{l(!1)}};return e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"email",children:"Email"}),e.jsx(m,{id:"email",type:"email",value:a,onChange:r=>p(r.target.value),placeholder:"votre@email.com",required:!0,disabled:t,autoComplete:"username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"password",children:"Mot de passe"}),e.jsx(m,{id:"password",type:"password",value:i,onChange:r=>h(r.target.value),placeholder:"••••••••",required:!0,disabled:t,autoComplete:"current-password"})]}),e.jsx(y,{type:"submit",className:"w-full",disabled:t,children:t?"Connexion...":"Se connecter"}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("a",{href:"/auth/forgot-password",className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Mot de passe oublié ?"})})]})},V=()=>e.jsx(E,{title:"Connexion",subtitle:"Bienvenue à nouveau ! Connectez-vous à votre compte.",children:e.jsx(C,{})});export{V as default};
