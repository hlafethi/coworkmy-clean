import{o as g,k as f,r as i,j as e,C as N,a as v,e as y,f as b,b as C,d as k,B as w,u as n,g as D}from"./index-Cce3lADS.js";import{u as P}from"./stripeUtils-BA8j7W_U.js";import{C as S}from"./check-circle-D46ZmpEM.js";import{M as _}from"./map-pin-cPaXVG6c.js";import{C as E}from"./calendar-COvMHN6L.js";const L=()=>{var m,u;const[c]=g(),a=f(),[h,o]=i.useState(!0),[s,p]=i.useState(null),t=c.get("booking_id"),d=c.get("session_id");i.useEffect(()=>{(async()=>{if(!t||!d){n.error("Informations de paiement manquantes"),a("/dashboard");return}try{o(!0),await P(t,"confirmed");const r=await D.get(`/bookings/${t}`);if(!r.success){n.error("Réservation non trouvée"),a("/dashboard");return}const j=r.data;p(j),n.success("Paiement confirmé avec succès !")}catch(r){console.error("Erreur lors du traitement du paiement:",r),n.error("Une erreur est survenue lors de la confirmation du paiement"),setTimeout(()=>{a("/dashboard")},3e3)}finally{o(!1)}})()},[t,d,a]);const l=x=>new Date(x).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsx("div",{className:"container max-w-md mx-auto py-12",children:e.jsxs(N,{children:[e.jsxs(v,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 bg-green-100 p-3 rounded-full w-16 h-16 flex items-center justify-center",children:e.jsx(S,{className:"h-8 w-8 text-green-600"})}),e.jsx(y,{className:"text-2xl",children:"Paiement confirmé"}),e.jsx(b,{children:"Votre réservation a été confirmée avec succès"})]}),e.jsx(C,{className:"space-y-4",children:h?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})]}):s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:"Détails de la réservation"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(_,{className:"h-5 w-5 text-gray-500 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:((m=s.space)==null?void 0:m.name)||"Espace"}),e.jsx("p",{className:"text-sm text-gray-500",children:((u=s.space)==null?void 0:u.description)||""})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"h-5 w-5 text-gray-500 mr-2"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Du ",l(s.start_time)]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Au ",l(s.end_time)]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Total payé"}),e.jsxs("span",{className:"font-bold",children:[s.total_price_ttc," €"]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Un reçu a été envoyé à votre adresse email"})]})]})}),e.jsx(k,{children:e.jsx(w,{className:"w-full",onClick:()=>a("/dashboard"),children:"Voir mes réservations"})})]})})};export{L as default};
